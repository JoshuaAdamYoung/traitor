
import plnx from '../src'

// import config from '../src/config'

// let key = 'MZ44ZJ20-V8RPJ16R-VF5FGG7Y-3F85JHRW'
// let secret = 'fbd75a109d39b407b277fa6bfd03e94e4f6701ef370f3c266fd7494cdec447d24de4d7edcbf40742ebc874d9d70c33e275fcae14363fea781929ffa335088bcd'

plnx.push(function (session) {
  session.subscribe('ticker', function (data) {
    console.log(data)
  })
})

// function a (n) {
//   return function (err, data) {
//     if (n === 'callback') {
//       console.log(n, { err, data: !!data })
//     } else if (n === 'promise1') {
//       console.log(n, { data: !!err })
//     } else {
//       console.log(n, { data: err })
//     }
//   }
// }

// let options = {
//   key,
//   secret,
//   currencyPair: 'BTC_NXT',
//   start: 1410158341,
//   end: 1410499372
// }

// plnx.returnTradableBalances(options, a('callback'))

// plnx.returnTradableBalances(options)
//   .then(a('promise1'))
//   .catch(a('promise2'))

// ///////////////////////////////////////////////////////////////////

// let url = config.urls
// let commands = config.commands

// let promises = []

// for (let name in commands) {
//   let promise = new Promise((resolve, reject) => {
//     let cfg = commands[name]
//     let fn = plnx[name]
//     let type = cfg.type
//     let params = makeParams(cfg.params)

//     if (!params) {
//       return resolve({ name })
//     }

//     if (type === 'private') {
//       params.key = key
//       params.secret = secret
//     }

//     return fn(params)
//       .then(resolve)
//       .catch(reject)

//     // fn(params, (err, data) => {
//     //   if (err) {
//     //     return reject({ name, err })
//     //   }

//     //   resolve({
//     //     name,
//     //     data: data
//     //   })
//     // })
//   })
//     .then((data) => {
//       return { name, data }
//     })
//     .catch((err) => {
//       return { name, err }
//     })

//   promises.push(promise)
// }

// Promise
//   .all(promises)
//   .then(console.log)
//   .catch(console.log)

// function makeParams (params) {
//   if (!Array.isArray(params)) {
//     params = params.private || params.public
//   }

//   params = params.filter((v) => !/\?$/.test(v))

//   let result = {}

//   for (let param of params) {
//     let value = null

//     switch (param) {
//       case 'currency' :
//         value = 'BTC'
//         break
//       case 'currencyPair' :
//         value = 'all'
//         break
//       case 'start' :
//         value = getUnixTimestamp() - (60 * 60 * 24 * 30 * 12 * 4)
//         break
//       case 'end' :
//         value = getUnixTimestamp()
//         break
//       case 'period' :
//         value = 14400
//         break
//       default :
//         return false
//     }

//     result[param] = value
//   }

//   return result
// }

// function getUnixTimestamp () {
//   return parseInt(Date.now())
// }
